# typed: true

# DO NOT EDIT MANUALLY
# This is an autogenerated file for types exported from the `omniauth` gem.
# Please instead update this file by running `bin/tapioca gem omniauth`.

module OmniAuth
  class << self
    def config; end

    # @yield [config]
    def configure; end

    def logger; end
    def mock_auth_for(provider); end
    def strategies; end
  end
end

# The AuthHash is a normalized schema returned by all OmniAuth
# strategies. It maps as much user information as the provider
# is able to provide into the InfoHash (stored as the `'info'`
# key).
class OmniAuth::AuthHash < ::OmniAuth::KeyStore
  def regular_writer(key, value); end

  # Tells you if this is considered to be a valid
  # OmniAuth AuthHash. The requirements for that
  # are that it has a provider name, a uid, and a
  # valid info hash. See InfoHash#valid? for
  # more details there.
  #
  # @return [Boolean]
  def valid?; end

  class << self
    def subkey_class; end
  end
end

class OmniAuth::AuthHash::InfoHash < ::OmniAuth::KeyStore
  def name; end

  # @return [Boolean]
  def name?; end

  def to_hash; end

  # @return [Boolean]
  def valid?; end

  class << self
    def subkey_class; end
  end
end

class OmniAuth::AuthenticityError < ::StandardError; end

class OmniAuth::AuthenticityTokenProtection < ::Rack::Protection::AuthenticityToken
  # @return [AuthenticityTokenProtection] a new instance of AuthenticityTokenProtection
  def initialize(options = T.unsafe(nil)); end

  def call(env); end
  def call!(env); end

  private

  # @raise [AuthenticityError]
  def default_reaction(_env); end

  # @raise [AuthenticityError]
  def deny(_env); end

  class << self
    def call(env); end
  end
end

class OmniAuth::Builder < ::Rack::Builder
  def before_callback_phase(&block); end
  def before_options_phase(&block); end
  def before_request_phase(&block); end
  def call(env); end
  def configure(&block); end
  def on_failure(&block); end
  def options(options = T.unsafe(nil)); end
  def provider(klass, *args, **opts, &block); end
end

class OmniAuth::Configuration
  include ::Singleton
  extend ::Singleton::SingletonClassMethods

  # @return [Configuration] a new instance of Configuration
  def initialize; end

  # This is a convenience method to be used by strategy authors
  # so that they can add special cases to the camelization utility
  # method that allows OmniAuth::Builder to work.
  #
  # @param name [String] The underscored name, e.g. `oauth`
  # @param camelized [String] The properly camelized name, e.g. 'OAuth'
  def add_camelization(name, camelized); end

  def add_mock(provider, original = T.unsafe(nil)); end

  # Returns the value of attribute allowed_request_methods.
  def allowed_request_methods; end

  # Sets the attribute allowed_request_methods
  #
  # @param value the value to set the attribute allowed_request_methods to.
  def allowed_request_methods=(_arg0); end

  def before_callback_phase(&block); end

  # Sets the attribute before_callback_phase
  #
  # @param value the value to set the attribute before_callback_phase to.
  def before_callback_phase=(_arg0); end

  def before_options_phase(&block); end

  # Sets the attribute before_options_phase
  #
  # @param value the value to set the attribute before_options_phase to.
  def before_options_phase=(_arg0); end

  def before_request_phase(&block); end

  # Sets the attribute before_request_phase
  #
  # @param value the value to set the attribute before_request_phase to.
  def before_request_phase=(_arg0); end

  # Returns the value of attribute camelizations.
  def camelizations; end

  # Sets the attribute camelizations
  #
  # @param value the value to set the attribute camelizations to.
  def camelizations=(_arg0); end

  # Returns the value of attribute failure_raise_out_environments.
  def failure_raise_out_environments; end

  # Sets the attribute failure_raise_out_environments
  #
  # @param value the value to set the attribute failure_raise_out_environments to.
  def failure_raise_out_environments=(_arg0); end

  # Returns the value of attribute form_css.
  def form_css; end

  # Sets the attribute form_css
  #
  # @param value the value to set the attribute form_css to.
  def form_css=(_arg0); end

  # Returns the value of attribute full_host.
  def full_host; end

  # Sets the attribute full_host
  #
  # @param value the value to set the attribute full_host to.
  def full_host=(_arg0); end

  # Returns the value of attribute logger.
  def logger; end

  # Sets the attribute logger
  #
  # @param value the value to set the attribute logger to.
  def logger=(_arg0); end

  # Returns the value of attribute mock_auth.
  def mock_auth; end

  # Sets the attribute mock_auth
  #
  # @param value the value to set the attribute mock_auth to.
  def mock_auth=(_arg0); end

  def on_failure(&block); end

  # Sets the attribute on_failure
  #
  # @param value the value to set the attribute on_failure to.
  def on_failure=(_arg0); end

  # Returns the value of attribute path_prefix.
  def path_prefix; end

  # Sets the attribute path_prefix
  #
  # @param value the value to set the attribute path_prefix to.
  def path_prefix=(_arg0); end

  def request_validation_phase(&block); end

  # Sets the attribute request_validation_phase
  #
  # @param value the value to set the attribute request_validation_phase to.
  def request_validation_phase=(_arg0); end

  # Returns the value of attribute silence_get_warning.
  def silence_get_warning; end

  # Sets the attribute silence_get_warning
  #
  # @param value the value to set the attribute silence_get_warning to.
  def silence_get_warning=(_arg0); end

  # Returns the value of attribute test_mode.
  def test_mode; end

  # Sets the attribute test_mode
  #
  # @param value the value to set the attribute test_mode to.
  def test_mode=(_arg0); end

  class << self
    def default_logger; end
    def defaults; end
  end
end

class OmniAuth::Error < ::StandardError; end

# This simple Rack endpoint that serves as the default
# 'failure' mechanism for OmniAuth. If a strategy fails for
# any reason this endpoint will be invoked. The default behavior
# is to redirect to `/auth/failure` except in the case of
# a development `RACK_ENV`, in which case an exception will
# be raised.
class OmniAuth::FailureEndpoint
  # @return [FailureEndpoint] a new instance of FailureEndpoint
  def initialize(env); end

  def call; end

  # Returns the value of attribute env.
  def env; end

  def origin_query_param; end
  def raise_out!; end
  def redirect_to_failure; end
  def strategy_name_query_param; end
  def strategy_path_prefix; end

  class << self
    def call(env); end
  end
end

class OmniAuth::Form
  # @return [Form] a new instance of Form
  def initialize(options = T.unsafe(nil)); end

  def button(text); end
  def fieldset(legend, options = T.unsafe(nil), &block); end
  def footer; end
  def header(title, header_info); end
  def html(html); end
  def input_field(type, name); end
  def label_field(text, target); end

  # Returns the value of attribute options.
  def options; end

  # Sets the attribute options
  #
  # @param value the value to set the attribute options to.
  def options=(_arg0); end

  def password_field(label, name); end
  def text_field(label, name); end
  def to_html; end
  def to_response; end

  protected

  def css; end

  class << self
    def build(options = T.unsafe(nil), &block); end
  end
end

OmniAuth::Form::DEFAULT_CSS = T.let(T.unsafe(nil), String)

# Generic helper hash that allows method access on deeply nested keys.
class OmniAuth::KeyStore < ::Hashie::Mash
  class << self
    # Disables warnings on Hashie 3.5.0+ for overwritten keys
    def override_logging; end
  end
end

class OmniAuth::NoSessionError < ::StandardError; end
module OmniAuth::Strategies; end

# The Developer strategy is a very simple strategy that can be used as a
# placeholder in your application until a different authentication strategy
# is swapped in. It has zero security and should *never* be used in a
# production setting.
#
# ## Usage
#
# To use the Developer strategy, all you need to do is put it in like any
# other strategy:
#
# This will create a strategy that, when the user visits `/auth/developer`
# they will be presented a form that prompts for (by default) their name
# and email address. The auth hash will be populated with these fields and
# the `uid` will simply be set to the provided email.
#
# @example Basic Usage
#
#   use OmniAuth::Builder do
#   provider :developer
#   end
# @example Custom Fields
#
#   use OmniAuth::Builder do
#   provider :developer,
#   :fields => [:first_name, :last_name],
#   :uid_field => :last_name
#   end
class OmniAuth::Strategies::Developer
  include ::OmniAuth::Strategy
  extend ::OmniAuth::Strategy::ClassMethods

  def request_phase; end
end

# The Strategy is the base unit of OmniAuth's ability to
# wrangle multiple providers. Each strategy provided by
# OmniAuth includes this mixin to gain the default functionality
# necessary to be compatible with the OmniAuth library.
module OmniAuth::Strategy
  mixes_in_class_methods ::OmniAuth::Strategy::ClassMethods

  # Initializes the strategy by passing in the Rack endpoint,
  # the unique URL segment name for this strategy, and any
  # additional arguments. An `options` hash is automatically
  # created from the last argument if it is a hash.
  #
  # @overload new
  # @overload new
  # @param app [Rack application] The application on which this middleware is applied.
  # @raise [ArgumentError]
  # @yield [Options] Yields options to block for further configuration.
  def initialize(app, *args, &block); end

  # Returns the value of attribute app.
  def app; end

  def auth_hash; end

  # Duplicates this instance and runs #call! on it.
  #
  # @param The [Hash] Rack environment.
  def call(env); end

  # The logic for dispatching any additional actions that need
  # to be taken. For instance, calling the request phase if
  # the request path is recognized.
  #
  # @param env [Hash] The Rack environment.
  def call!(env); end

  def call_app!(env = T.unsafe(nil)); end

  # Performs the steps necessary to run the callback phase of a strategy.
  def callback_call; end

  def callback_path; end
  def callback_phase; end
  def callback_url; end
  def credentials; end
  def current_path; end
  def custom_path(kind); end

  # Returns the value of attribute env.
  def env; end

  def extra; end
  def fail!(message_key, exception = T.unsafe(nil)); end
  def full_host; end
  def info; end
  def inspect; end

  # Direct access to the OmniAuth logger, automatically prefixed
  # with this strategy's name.
  #
  # @example
  #   log :warn, "This is a warning."
  def log(level, message); end

  # This is called in lieu of the normal request process
  # in the event that OmniAuth has been configured to be
  # in test mode.
  def mock_call!(*_arg0); end

  def mock_callback_call; end
  def mock_request_call; end
  def name; end

  # Returns true if the environment recognizes either the
  # request or callback path.
  #
  # @return [Boolean]
  def on_auth_path?; end

  # @return [Boolean]
  def on_callback_path?; end

  # @return [Boolean]
  def on_path?(path); end

  # @return [Boolean]
  def on_request_path?; end

  # Returns the value of attribute options.
  def options; end

  # Responds to an OPTIONS request.
  def options_call; end

  # @return [Boolean]
  def options_request?; end

  def path_prefix; end
  def query_string; end
  def redirect(uri); end
  def request; end

  # Performs the steps necessary to run the request phase of a strategy.
  def request_call; end

  def request_path; end

  # perform any information gathering you need to be able to authenticate
  # the user in this phase.
  #
  # @abstract This method is called when the user is on the request path. You should
  # @raise [NotImplementedError]
  def request_phase; end

  # Returns the value of attribute response.
  def response; end

  def script_name; end
  def session; end
  def setup_path; end

  # The setup phase looks for the `:setup` option to exist and,
  # if it is, will call either the Rack endpoint supplied to the
  # `:setup` option or it will call out to the setup path of the
  # underlying application. This will default to `/auth/:provider/setup`.
  def setup_phase; end

  # Determines whether or not user info should be retrieved. This
  # allows some strategies to save a call to an external API service
  # for existing users. You can use it either by setting the `:skip_info`
  # to true or by setting `:skip_info` to a Proc that takes a uid and
  # evaluates to true when you would like to skip info.
  #
  # @example
  #
  #   use MyStrategy, :skip_info => lambda{|uid| User.find_by_uid(uid)}
  # @return [Boolean]
  def skip_info?; end

  def uid; end
  def user_info; end
  def warn_if_using_get_on_request_path; end

  protected

  def merge_stack(stack); end

  # @return [Boolean]
  def ssl?; end

  private

  def initialize_copy(*args); end

  class << self
    def included(base); end
  end
end

OmniAuth::Strategy::CURRENT_PATH_REGEX = T.let(T.unsafe(nil), Regexp)

module OmniAuth::Strategy::ClassMethods
  # Sets (and retrieves) option key names for initializer arguments to be
  # recorded as. This takes care of 90% of the use cases for overriding
  # the initializer in OmniAuth Strategies.
  def args(args = T.unsafe(nil)); end

  def compile_stack(ancestors, method, context); end

  # This allows for more declarative subclassing of strategies by allowing
  # default options to be set using a simple configure call.
  #
  # @example Using a yield to configure the default options.
  #
  #   class MyStrategy
  #   include OmniAuth::Strategy
  #
  #   configure do |c|
  #   c.foo = 'bar'
  #   end
  #   end
  # @example Using a hash to configure the default options.
  #
  #   class MyStrategy
  #   include OmniAuth::Strategy
  #   configure foo: 'bar'
  #   end
  # @param options [Hash] If supplied, these will be the default options (deep-merged into the superclass's default options).
  # @yield [Options] The options Mash that allows you to set your defaults as you'd like.
  def configure(options = T.unsafe(nil)); end

  def credentials(&block); end
  def credentials_stack(context); end

  # Returns an inherited set of default options set at the class-level
  # for each strategy.
  def default_options; end

  def extra(&block); end
  def extra_stack(context); end
  def info(&block); end
  def info_stack(context); end

  # Directly declare a default option for your class. This is a useful from
  # a documentation perspective as it provides a simple line-by-line analysis
  # of the kinds of options your strategy provides by default.
  #
  # @example
  #
  #   class MyStrategy
  #   include OmniAuth::Strategy
  #
  #   option :foo, 'bar'
  #   option
  #   end
  # @param name [Symbol] The key of the default option in your configuration hash.
  # @param value [Object] The value your object defaults to. Nil if not provided.
  def option(name, value = T.unsafe(nil)); end

  def uid(&block); end
  def uid_stack(context); end

  private

  def credentials_proc; end
  def extra_proc; end
  def info_proc; end
  def uid_proc; end
end

OmniAuth::Strategy::EMPTY_STRING = T.let(T.unsafe(nil), String)
class OmniAuth::Strategy::Options < ::OmniAuth::KeyStore; end

# Support for testing OmniAuth strategies.
module OmniAuth::Test; end

class OmniAuth::Test::PhonySession
  # @return [PhonySession] a new instance of PhonySession
  def initialize(app); end

  def call(env); end
end

module OmniAuth::Test::StrategyMacros
  def sets_an_auth_hash; end
  def sets_provider_to(provider); end
  def sets_uid_to(uid); end
  def sets_user_info_to(user_info); end
end

# Support for testing OmniAuth strategies.
#
# @example Usage
#   class MyStrategyTest < Test::Unit::TestCase
#   include OmniAuth::Test::StrategyTestCase
#   def strategy
#   # return the parameters to a Rack::Builder map call:
#   [MyStrategy, :some, :configuration, :options => 'here']
#   end
#   setup do
#   post '/auth/my_strategy/callback', :user => { 'name' => 'Dylan', 'id' => '445' }
#   end
#   end
module OmniAuth::Test::StrategyTestCase
  def app; end
  def app_response; end
  def session; end
  def strategy; end
end

module OmniAuth::Utils
  private

  def camelize(word, first_letter_in_uppercase = T.unsafe(nil)); end
  def deep_merge(hash, other_hash); end
  def form_css; end

  class << self
    def camelize(word, first_letter_in_uppercase = T.unsafe(nil)); end
    def deep_merge(hash, other_hash); end
    def form_css; end
  end
end
